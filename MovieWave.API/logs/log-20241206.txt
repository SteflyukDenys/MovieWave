{"@t":"2024-12-06T07:58:17.3689495Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"87c0ab00fdced7a861536aa7eeaa72f5","@sp":"40ab2351cf9ed151","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8LPETT44IT:00000001","RequestPath":"/swagger","ConnectionId":"0HN8LPETT44IT"}
{"@t":"2024-12-06T07:59:35.1446840Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","@tr":"3c2a6f2e70b640fe72f0433ca536a183","@sp":"4260a4a2b404b470","elapsed":"44","parameters":"@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?'","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"INSERT INTO \"Studios\" (\"Description\", \"LogoPath\", \"Name\", \"SeoAddition_Description\", \"SeoAddition_MetaDescription\", \"SeoAddition_MetaImagePath\", \"SeoAddition_MetaTitle\", \"SeoAddition_Slug\")\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)\r\nRETURNING \"Id\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"d806fc29-723b-4fb7-b082-365018f89ee4","ActionName":"MovieWave.API.Controllers.StudioController.Create (MovieWave.API)","RequestId":"0HN8LPETT44J0:00000001","RequestPath":"/api/v1/studio/create","ConnectionId":"0HN8LPETT44J0"}
{"@t":"2024-12-06T07:59:35.2305090Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"PK_Studios\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \"PK_Studios\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: Studios\r\n    ConstraintName: PK_Studios\r\n    File: nbtinsert.c\r\n    Line: 666\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"3c2a6f2e70b640fe72f0433ca536a183","@sp":"4260a4a2b404b470","contextType":"MovieWave.DAL.AppDbContext","newline":"\r\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"PK_Studios\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \"PK_Studios\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: Studios\r\n    ConstraintName: PK_Studios\r\n    File: nbtinsert.c\r\n    Line: 666\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"d806fc29-723b-4fb7-b082-365018f89ee4","ActionName":"MovieWave.API.Controllers.StudioController.Create (MovieWave.API)","RequestId":"0HN8LPETT44J0:00000001","RequestPath":"/api/v1/studio/create","ConnectionId":"0HN8LPETT44J0"}
{"@t":"2024-12-06T07:59:35.6652656Z","@mt":"Помилка при додавання Studio: {Message}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"PK_Studios\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \"PK_Studios\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: Studios\r\n    ConstraintName: PK_Studios\r\n    File: nbtinsert.c\r\n    Line: 666\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at MovieWave.DAL.Repositories.UnitOfWork.SaveChangesAsync() in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.DAL\\Repositories\\UnitOfWork.cs:line 35\r\n   at MovieWave.Application.Services.StudioService.CreateAsync(CreateStudioDto dto, FileDto logoPath) in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.Application\\Services\\StudioService.cs:line 114","@tr":"3c2a6f2e70b640fe72f0433ca536a183","@sp":"4260a4a2b404b470","Message":"An error occurred while saving the entity changes. See the inner exception for details.","ActionId":"d806fc29-723b-4fb7-b082-365018f89ee4","ActionName":"MovieWave.API.Controllers.StudioController.Create (MovieWave.API)","RequestId":"0HN8LPETT44J0:00000001","RequestPath":"/api/v1/studio/create","ConnectionId":"0HN8LPETT44J0"}
{"@t":"2024-12-06T08:02:05.3641274Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"7eeb65e51025646e11d397c1d7f543ea","@sp":"104880e17b6317d1","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8LPH28MSFG:00000001","RequestPath":"/swagger","ConnectionId":"0HN8LPH28MSFG"}
{"@t":"2024-12-06T08:03:08.8554972Z","@mt":"An error occurred using the connection to database '{database}' on server '{server}'.","@l":"Error","@tr":"1a593f5afd7ec167090306e4ba2b584f","@sp":"4c56cdb3eae2d3f5","database":"MovieWave","server":"tcp://localhost:5432","EventId":{"Id":20004,"Name":"Microsoft.EntityFrameworkCore.Database.Connection.ConnectionError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Connection","ActionId":"bb1211c8-a964-45a4-a624-4aa553cd5e4a","ActionName":"MovieWave.API.Controllers.StudioController.Create (MovieWave.API)","RequestId":"0HN8LPH28MSFJ:00000001","RequestPath":"/api/v1/studio/create","ConnectionId":"0HN8LPH28MSFJ"}
{"@t":"2024-12-06T08:03:09.8185509Z","@mt":"3D000: database \"MovieWave\" does not exist","@l":"Error","@x":"Npgsql.PostgresException (0x80004005): 3D000: database \"MovieWave\" does not exist\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)\r\n   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)\r\n   at MovieWave.DAL.Repositories.UnitOfWork.BeginTransactionAsync() in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.DAL\\Repositories\\UnitOfWork.cs:line 30\r\n   at MovieWave.Application.Services.StudioService.CreateAsync(CreateStudioDto dto, FileDto logoPath) in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.Application\\Services\\StudioService.cs:line 82\r\n   at MovieWave.API.Controllers.StudioController.Create(CreateStudioDto dto, IFormFile imageLogo) in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.API\\Controllers\\StudioController.cs:line 106\r\n   at lambda_method6(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)\r\n   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)\r\n   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at MovieWave.API.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.API\\Middlewares\\ExceptionHandlingMiddleware.cs:line 22\r\n  Exception data:\r\n    Severity: FATAL\r\n    SqlState: 3D000\r\n    MessageText: database \"MovieWave\" does not exist\r\n    File: postinit.c\r\n    Line: 1048\r\n    Routine: InitPostgres","@tr":"1a593f5afd7ec167090306e4ba2b584f","@sp":"4c56cdb3eae2d3f5","RequestId":"0HN8LPH28MSFJ:00000001","RequestPath":"/api/v1/studio/create","ConnectionId":"0HN8LPH28MSFJ"}
{"@t":"2024-12-06T08:04:29.3545518Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"67018e564b2bc5e69983815ca27ca12a","@sp":"32dbe71fac530d39","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8LPIDECRIB:00000001","RequestPath":"/swagger","ConnectionId":"0HN8LPIDECRIB"}
{"@t":"2024-12-06T08:23:02.9118152Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"d9e9607fe0a376f5f85bdef9ba5ab348","@sp":"db6bed531455a38a","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8LPSOGGLFN:00000001","RequestPath":"/swagger","ConnectionId":"0HN8LPSOGGLFN"}
{"@t":"2024-12-06T08:26:44.0575513Z","@mt":"Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.","@l":"Warning","@tr":"ece6ef53d050aeba80ba1dcceccd23b7","@sp":"7b0bf2b9c4cb7e0a","EventId":{"Id":20504,"Name":"Microsoft.EntityFrameworkCore.Query.MultipleCollectionIncludeWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"38e533a7-db21-4e96-908a-8cbfed6757d6","ActionName":"MovieWave.API.Controllers.MediaItemController.GetMediaItemAll (MovieWave.API)","RequestId":"0HN8LPSOGGLFR:00000001","RequestPath":"/api/v1/mediaitem/all","ConnectionId":"0HN8LPSOGGLFR"}
{"@t":"2024-12-06T14:26:03.4686539Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"16ca493459d63ee9e0fffaafe0939ed3","@sp":"801192ab7a79a3bd","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M07JU2G51:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M07JU2G51"}
{"@t":"2024-12-06T14:29:05.5747637Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"3a33be50f36eb3f2424f267727577396","@sp":"d8a96e8fdaf2243e","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M09ALS9T3:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M09ALS9T3"}
{"@t":"2024-12-06T14:57:29.7759541Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"5615c41d03e3630cef48833ece7cb3ea","@sp":"63f0f798321c5797","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M0P6QUEBB:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M0P6QUEBB"}
{"@t":"2024-12-06T14:58:13.9852605Z","@mt":"Unable to resolve service for type 'MovieWave.Domain.Interfaces.Services.IPersonService' while attempting to activate 'MovieWave.API.Controllers.PersonController'.","@l":"Error","@x":"System.InvalidOperationException: Unable to resolve service for type 'MovieWave.Domain.Interfaces.Services.IPersonService' while attempting to activate 'MovieWave.API.Controllers.PersonController'.\r\n   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)\r\n   at lambda_method10(Closure, IServiceProvider, Object[])\r\n   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)\r\n   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)\r\n   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at MovieWave.API.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.API\\Middlewares\\ExceptionHandlingMiddleware.cs:line 22","@tr":"a58cc7da68099db6217d5b3ee0e1f0b9","@sp":"6fe71a8bbe1df642","RequestId":"0HN8M0P6QUEBC:00000001","RequestPath":"/api/v1/person/create","ConnectionId":"0HN8M0P6QUEBC"}
{"@t":"2024-12-06T14:59:26.7568113Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"35973de7e43cf42c8ff43c4b150378b1","@sp":"0f0791989e42226d","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M0Q9N1544:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M0Q9N1544"}
{"@t":"2024-12-06T14:59:58.0423299Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","@tr":"16e4f7d1153a4ded8d1b5ef870e7161b","@sp":"8a0585967c1d6229","elapsed":"136","parameters":"@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int64), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?' (DbType = Guid), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int64), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?'","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"INSERT INTO \"People\" (\"Id\", \"Biography\", \"BirthDate\", \"CreatedAt\", \"CreatedBy\", \"DeathDate\", \"FirstName\", \"LastName\", \"MediaItemId\", \"UpdatedAt\", \"UpdatedBy\", \"SeoAddition_Description\", \"SeoAddition_MetaDescription\", \"SeoAddition_MetaImagePath\", \"SeoAddition_MetaTitle\", \"SeoAddition_Slug\")\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"a3697be2-3934-4bf8-9cf2-db283ce21a72","ActionName":"MovieWave.API.Controllers.PersonController.CreatePerson (MovieWave.API)","RequestId":"0HN8M0Q9N1548:00000001","RequestPath":"/api/v1/person/create","ConnectionId":"0HN8M0Q9N1548"}
{"@t":"2024-12-06T14:59:58.1025896Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"SeoAddition_Slug\" of relation \"People\" violates not-null constraint\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23502\r\n    MessageText: null value in column \"SeoAddition_Slug\" of relation \"People\" violates not-null constraint\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: People\r\n    ColumnName: SeoAddition_Slug\r\n    File: execMain.c\r\n    Line: 1987\r\n    Routine: ExecConstraints\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"16e4f7d1153a4ded8d1b5ef870e7161b","@sp":"8a0585967c1d6229","contextType":"MovieWave.DAL.AppDbContext","newline":"\r\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"SeoAddition_Slug\" of relation \"People\" violates not-null constraint\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23502\r\n    MessageText: null value in column \"SeoAddition_Slug\" of relation \"People\" violates not-null constraint\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: People\r\n    ColumnName: SeoAddition_Slug\r\n    File: execMain.c\r\n    Line: 1987\r\n    Routine: ExecConstraints\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"a3697be2-3934-4bf8-9cf2-db283ce21a72","ActionName":"MovieWave.API.Controllers.PersonController.CreatePerson (MovieWave.API)","RequestId":"0HN8M0Q9N1548:00000001","RequestPath":"/api/v1/person/create","ConnectionId":"0HN8M0Q9N1548"}
{"@t":"2024-12-06T14:59:58.6758724Z","@mt":"An error occurred while saving the entity changes. See the inner exception for details.","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23502: null value in column \"SeoAddition_Slug\" of relation \"People\" violates not-null constraint\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23502\r\n    MessageText: null value in column \"SeoAddition_Slug\" of relation \"People\" violates not-null constraint\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: People\r\n    ColumnName: SeoAddition_Slug\r\n    File: execMain.c\r\n    Line: 1987\r\n    Routine: ExecConstraints\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at MovieWave.DAL.Repositories.BaseRepository`1.SaveChangesAsync() in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.DAL\\Repositories\\BaseRepository.cs:line 21\r\n   at MovieWave.Application.Services.PersonService.CreatePersonAsync(CreatePersonDto dto) in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.Application\\Services\\PersonService.cs:line 36\r\n   at MovieWave.API.Controllers.PersonController.CreatePerson(CreatePersonDto dto) in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.API\\Controllers\\PersonController.cs:line 26\r\n   at lambda_method6(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)\r\n   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)\r\n   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at MovieWave.API.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.API\\Middlewares\\ExceptionHandlingMiddleware.cs:line 22","@tr":"16e4f7d1153a4ded8d1b5ef870e7161b","@sp":"8a0585967c1d6229","RequestId":"0HN8M0Q9N1548:00000001","RequestPath":"/api/v1/person/create","ConnectionId":"0HN8M0Q9N1548"}
{"@t":"2024-12-06T15:01:40.6087274Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"09d4e4f761d0e6c87d76f79a48970a0e","@sp":"1ca70a047259ac70","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M0RHK74KS:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M0RHK74KS"}
{"@t":"2024-12-06T15:07:07.5237779Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"90164614be1e130cce4a6db447d3be9f","@sp":"fe22c694b8072b20","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M0UIVPDTV:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M0UIVPDTV"}
{"@t":"2024-12-06T18:06:59.1655598Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"1d5491bd95bddf95d149b56fe6264e63","@sp":"3b345c1117afc507","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M432SQ7D0:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M432SQ7D0"}
{"@t":"2024-12-06T18:12:47.1723829Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"7bce9d332d0c065e4142740b96b17add","@sp":"10a6b859f0c05dec","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M46AS4EAT:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M46AS4EAT"}
{"@t":"2024-12-06T18:14:06.8372307Z","@mt":"Unable to resolve service for type 'MovieWave.Domain.Interfaces.Services.IPersonImageService' while attempting to activate 'MovieWave.API.Controllers.PersonImageController'.","@l":"Error","@x":"System.InvalidOperationException: Unable to resolve service for type 'MovieWave.Domain.Interfaces.Services.IPersonImageService' while attempting to activate 'MovieWave.API.Controllers.PersonImageController'.\r\n   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)\r\n   at lambda_method10(Closure, IServiceProvider, Object[])\r\n   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)\r\n   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)\r\n   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at MovieWave.API.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext) in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.API\\Middlewares\\ExceptionHandlingMiddleware.cs:line 22","@tr":"7a5321120ee2fe8b9751890dea5d2339","@sp":"03700e484f72d6e6","RequestId":"0HN8M46AS4EB0:00000001","RequestPath":"/api/v1/personimage/upload","ConnectionId":"0HN8M46AS4EB0"}
{"@t":"2024-12-06T18:16:52.0982741Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"8a1e6bed6699dec1469e8a2d59066113","@sp":"3d3c8e4db0f73eac","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M48JR0PKR:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M48JR0PKR"}
{"@t":"2024-12-06T18:17:29.8073601Z","@mt":"Виникла помилка при додавані картинки: {Message}","@l":"Error","@x":"AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.\r\n\r\nMapping types:\r\nCreatePersonImageDto -> PersonImage\r\nMovieWave.Domain.Dto.PersonImage.CreatePersonImageDto -> MovieWave.Domain.Entity.PersonImage\r\n   at lambda_method37(Closure, Object, PersonImage, ResolutionContext)\r\n   at MovieWave.Application.Services.PersonImageService.UploadPersonImageAsync(CreatePersonImageDto dto, FileDto uploadImage) in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.Application\\Services\\PersonImageService.cs:line 54","@tr":"d588a037d22f5cd15f0947f7b98894dc","@sp":"36e5517b53265790","Message":"Missing type map configuration or unsupported mapping.\r\n\r\nMapping types:\r\nCreatePersonImageDto -> PersonImage\r\nMovieWave.Domain.Dto.PersonImage.CreatePersonImageDto -> MovieWave.Domain.Entity.PersonImage","ActionId":"2c5e201c-e36c-4038-9b61-30d68241878c","ActionName":"MovieWave.API.Controllers.PersonImageController.UploadPersonImage (MovieWave.API)","RequestId":"0HN8M48JR0PKU:00000001","RequestPath":"/api/v1/personimage/upload","ConnectionId":"0HN8M48JR0PKU"}
{"@t":"2024-12-06T18:18:15.0830321Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"6a03666fc053ec6470b45443f7d19e09","@sp":"ffa1d6bfaa454008","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M49CGPEEO:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M49CGPEEO"}
{"@t":"2024-12-06T18:31:05.8355450Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"07391b30ef502fc5dfdce5eaba78a238","@sp":"dbef3e8a7115d13b","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M4GI5MU92:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M4GI5MU92"}
{"@t":"2024-12-06T18:35:21.6885312Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"357f3df35ce9b797963c58556f6f2f95","@sp":"dcce285442f4d2da","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M4IUFBBAA:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M4IUFBBAA"}
{"@t":"2024-12-06T18:40:46.9669026Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"384c0d940002bd2c981ea61f9f3bafc9","@sp":"6e52abbac2dd5fb1","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M4LVF8CF0:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M4LVF8CF0"}
{"@t":"2024-12-06T18:42:12.0668693Z","@mt":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@l":"Error","@tr":"9e9d6bcf99391598075030c69b7269c9","@sp":"0204acce8797e79c","elapsed":"374","parameters":"@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = DateTime), @p13='?' (DbType = Int64), @p14='?' (DbType = Int64), @p15='?' (DbType = DateTime), @p16='?' (DbType = Int64), @p17='?', @p18='?', @p19='?', @p20='?', @p21='?', @p22='?' (DbType = Int64), @p23='?' (DbType = Guid), @p24='?' (DbType = Guid), @p25='?' (DbType = Int64), @p26='?' (DbType = Guid), @p27='?' (DbType = Guid)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"INSERT INTO \"MediaItems\" (\"Id\", \"CreatedAt\", \"CreatedBy\", \"Description\", \"Duration\", \"EpisodesCount\", \"FirstAirDate\", \"ImdbScore\", \"LastAirDate\", \"MediaItemTypeId\", \"Name\", \"OriginalName\", \"PublishedAt\", \"RestrictedRatingId\", \"StatusId\", \"UpdatedAt\", \"UpdatedBy\", \"SeoAddition_Description\", \"SeoAddition_MetaDescription\", \"SeoAddition_MetaImagePath\", \"SeoAddition_MetaTitle\", \"SeoAddition_Slug\")\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)\r\nRETURNING \"SearchVector\";\r\nINSERT INTO \"MediaItemCountries\" (\"CountryId\", \"MediaItemId\")\r\nVALUES (@p22, @p23);\r\nINSERT INTO \"MediaItemStudios\" (\"MediaItemId\", \"StudioId\")\r\nVALUES (@p24, @p25);\r\nINSERT INTO \"MediaItemTags\" (\"MediaItemId\", \"TagId\")\r\nVALUES (@p26, @p27);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"8998d5b4-48bd-4d7d-96df-1e9d7fad9a7f","ActionName":"MovieWave.API.Controllers.MediaItemController.CreateMediaItem (MovieWave.API)","RequestId":"0HN8M4LVF8CF5:00000001","RequestPath":"/api/v1/mediaitem/create","ConnectionId":"0HN8M4LVF8CF5"}
{"@t":"2024-12-06T18:42:12.1258891Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"MediaItems\" violates foreign key constraint \"FK_MediaItems_MediaItemTypes_MediaItemTypeId\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23503\r\n    MessageText: insert or update on table \"MediaItems\" violates foreign key constraint \"FK_MediaItems_MediaItemTypes_MediaItemTypeId\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: MediaItems\r\n    ConstraintName: FK_MediaItems_MediaItemTypes_MediaItemTypeId\r\n    File: ri_triggers.c\r\n    Line: 2599\r\n    Routine: ri_ReportViolation\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","@tr":"9e9d6bcf99391598075030c69b7269c9","@sp":"0204acce8797e79c","contextType":"MovieWave.DAL.AppDbContext","newline":"\r\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"MediaItems\" violates foreign key constraint \"FK_MediaItems_MediaItemTypes_MediaItemTypeId\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23503\r\n    MessageText: insert or update on table \"MediaItems\" violates foreign key constraint \"FK_MediaItems_MediaItemTypes_MediaItemTypeId\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: MediaItems\r\n    ConstraintName: FK_MediaItems_MediaItemTypes_MediaItemTypeId\r\n    File: ri_triggers.c\r\n    Line: 2599\r\n    Routine: ri_ReportViolation\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"8998d5b4-48bd-4d7d-96df-1e9d7fad9a7f","ActionName":"MovieWave.API.Controllers.MediaItemController.CreateMediaItem (MovieWave.API)","RequestId":"0HN8M4LVF8CF5:00000001","RequestPath":"/api/v1/mediaitem/create","ConnectionId":"0HN8M4LVF8CF5"}
{"@t":"2024-12-06T18:42:12.3615981Z","@mt":"Помилка при створенні MediaItem: {Message}","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table \"MediaItems\" violates foreign key constraint \"FK_MediaItems_MediaItemTypes_MediaItemTypeId\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23503\r\n    MessageText: insert or update on table \"MediaItems\" violates foreign key constraint \"FK_MediaItems_MediaItemTypes_MediaItemTypeId\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: MediaItems\r\n    ConstraintName: FK_MediaItems_MediaItemTypes_MediaItemTypeId\r\n    File: ri_triggers.c\r\n    Line: 2599\r\n    Routine: ri_ReportViolation\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at MovieWave.DAL.Repositories.UnitOfWork.SaveChangesAsync() in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.DAL\\Repositories\\UnitOfWork.cs:line 41\r\n   at MovieWave.Application.Services.MediaItemService.CreateMediaItemAsync(CreateMediaItemDto dto) in C:\\Users\\denis\\source\\repos\\MovieWave\\MovieWave.Application\\Services\\MediaItemService.cs:line 214","@tr":"9e9d6bcf99391598075030c69b7269c9","@sp":"0204acce8797e79c","Message":"An error occurred while saving the entity changes. See the inner exception for details.","ActionId":"8998d5b4-48bd-4d7d-96df-1e9d7fad9a7f","ActionName":"MovieWave.API.Controllers.MediaItemController.CreateMediaItem (MovieWave.API)","RequestId":"0HN8M4LVF8CF5:00000001","RequestPath":"/api/v1/mediaitem/create","ConnectionId":"0HN8M4LVF8CF5"}
{"@t":"2024-12-06T18:47:14.0105941Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"b834a080977e12c907d8d2e4512c4153","@sp":"fcdb2e1f72a6926a","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M4PIQA1V1:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M4PIQA1V1"}
{"@t":"2024-12-06T18:52:40.3160605Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"6d33ebf6e093431684d6bf4614b6f3be","@sp":"8d3d7f9ad77b4e22","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HN8M4SJLQB08:00000001","RequestPath":"/swagger","ConnectionId":"0HN8M4SJLQB08"}
